# ğŸ” Secure Video Streaming - Hybrid Cryptosystem Demo

ÄÃ¢y lÃ  má»™t há»‡ thá»‘ng demo mÃ£ hÃ³a video sá»­ dá»¥ng **káº¿t há»£p Chaotic keystream vÃ  AES-256-GCM** nháº±m nÃ¢ng cao tÃ­nh báº£o máº­t vÃ  xÃ¡c thá»±c khi truyá»n táº£i ná»™i dung Ä‘a phÆ°Æ¡ng tiá»‡n (video). Client cÃ³ thá»ƒ giáº£i mÃ£ vÃ  phÃ¡t video ngay trong trÃ¬nh duyá»‡t báº±ng WebCrypto API vÃ  WebAssembly (WASM).

## ğŸ¯ Má»¥c tiÃªu

* MÃ£ hÃ³a video sá»­ dá»¥ng `Chaotic keystream XOR` vÃ  `AES-256-GCM`
* Cung cáº¥p key tá»« server Flask qua API giáº£ láº­p DRM
* Giáº£i mÃ£ táº¡i client báº±ng `crypto.subtle` vÃ  WASM Ä‘á»ƒ phÃ¡t láº¡i video
* TrÃ¬nh diá»…n tÃ­nh kháº£ thi cá»§a phÆ°Æ¡ng phÃ¡p báº£o máº­t káº¿t há»£p (Hybrid Cryptography)

---

## ğŸ“ Cáº¥u trÃºc thÆ° má»¥c

```
secure_video_streamming/
â”œâ”€ ChaoticCryptology/            # C++ library & build config
â”‚   â”œâ”€ include/
â”‚   â”œâ”€ src/
â”‚   â”‚   â”œâ”€ chaotic.cpp
â”‚   â”‚   â”œâ”€ crypto.cpp
â”‚   â”‚   â””â”€ main.cpp
â”‚   â””â”€ output/
â”‚       â”œâ”€ Chaotic_Cryptology.dll
â”‚       â””â”€ Chaotic_Cryptology.lib
â”œâ”€ scripts/                      # Utility scripts (Python wrappers)
â”‚   â””â”€ encrypt_video.py           # Encrypt a single file via DLL/WASM
â”œâ”€ attacker_sniffer.py           # MITM/sniffer simulation
â”œâ”€ requirements.txt              # Python deps (Flask, cryptography if needed)
â”œâ”€ static/                       # All client-side assets
â”‚   â”œâ”€ js/
â”‚   â”‚   â””â”€â”€ script.js            # Your HLS-like decrypt & append logic
â”‚   â”œâ”€ wasm/
â”‚   â”‚   â”œâ”€ chaotic_wasm.js       # Emscripten JS wrapper
â”‚   â”‚   â””â”€ chaotic_wasm.wasm     # WebAssembly binary
â”‚   â”œâ”€ keys/
â”‚   â”‚   â””â”€ sample1.key           # Generated by encrypt_segments.py
â”‚   â”œâ”€ encrypted_segments/
â”‚   â”‚   â””â”€ sample1.enc                 # Encrypted segment files
â”‚   â””â”€ video/
â”‚       â””â”€ sample1.mp4            # Original video (for segmenting)
â”œâ”€ templates/
â”‚   â””â”€ index.html                # Demo HTML page
â””â”€ server.py                 # Django/Flask streaming server
```

---

## ğŸ” Quy trÃ¬nh mÃ£ hÃ³a

1. Táº¡o keystream báº±ng Logistic Map:

   ```
   xâ‚™â‚Šâ‚ = r * xâ‚™ * (1 - xâ‚™)
   ```

   vá»›i seed = 0.5, r = 3.9
2. XOR dá»¯ liá»‡u video vá»›i keystream
3. MÃ£ hÃ³a káº¿t quáº£ báº±ng AES-256-GCM
4. Xuáº¥t ra `[IV || TAG || CIPHERTEXT]` vÃ o file `.enc`

ğŸ‘‰ Thá»±c hiá»‡n báº±ng:

```bash
python encrypt_video.py input.mp4 segment/sample1.enc
```

---

## ğŸ”“ Quy trÃ¬nh giáº£i mÃ£ táº¡i client

1. Táº£i key tá»«:

   ```
   GET /get_key/<video_id>?token=<your_token>
   ```
2. Táº£i video Ä‘Ã£ mÃ£ hÃ³a:

   ```
   GET /segment/<video_id>.enc
   ```
3. Giáº£i mÃ£ AES-GCM báº±ng WebCrypto:

   ```js
   crypto.subtle.decrypt({ name: 'AES-GCM', iv, tagLength: 128 }, aesKey, data)
   ```
4. Sinh láº¡i keystream chaotic vÃ  XOR vá»›i káº¿t quáº£ giáº£i mÃ£
5. Táº¡o `Blob` vÃ  phÃ¡t video báº±ng HTML5 `<video>`

---

## ğŸ—‚ï¸ Luá»“ng hoáº¡t Ä‘á»™ng cá»§a server

```plaintext
Client                          Server (Flask)
  |                                  |
  | GET /                            |
  |--------------------------------->|  Tráº£ vá» index.html
  |                                  |
  | GET /static/js/script.js        |
  |--------------------------------->|  Tráº£ vá» script.js
  |                                  |
  | GET /static/wasm/chaotic_wasm.js |
  |--------------------------------->|  Tráº£ vá» chaotic_wasm.js
  |                                  |
  | GET /get_key/sample1?token=abc123|
  |--------------------------------->|  Tráº£ vá» JSON { key_b64 }
  |                                  |
  | GET /segment/sample1.enc         |
  |--------------------------------->|  Tráº£ vá» file .enc
  |                                  |
  | (Client decrypt & play)          |
```

---

## â–¶ï¸ Cháº¡y thá»­ demo

1. CÃ i thÆ° viá»‡n:

   ```bash
   pip install flask
   ```
2. Khá»Ÿi Ä‘á»™ng server:

   ```bash
   python server.py
   ```
3. Truy cáº­p: [http://127.0.0.1:9000](http://127.0.0.1:9000)

---

## âš™ï¸ BiÃªn dá»‹ch WASM tá»« chaotic\_xor.cpp

YÃªu cáº§u: [Emscripten SDK](https://emscripten.org/docs/getting_started/downloads.html)

```bash
emcc chaotic_xor.cpp -O3 \
  -s MODULARIZE=1 -s EXPORT_NAME="ChaoticModule" \
  -s EXPORTED_FUNCTIONS="['_generate_chaotic_keystream','_free_buffer']" \
  -s EXPORTED_RUNTIME_METHODS="['cwrap','HEAPU8']" \
  -o chaotic_wasm.js
```

> Copy `chaotic_wasm.js` & `chaotic_wasm.wasm` vÃ o `static/wasm/`

---

## ğŸ§‘â€ğŸ’» TÃ¡c giáº£

NhÃ³m 23520564 - 23520648 - 23520394
MÃ´n há»c: **Cryptography and Security**
